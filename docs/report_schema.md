# Report JSON Schema

This reference captures the Phase 5 report writer payload generated by
`crapssim_control`. It supplements the CSV journal/summary docs and is kept in
sync with the controller checkpoints.

⸻

## Top-Level Structure

A report is a JSON object with these primary sections:

- `identity`: Run identifiers merged from spec metadata and CSV config.
- `validation_engine`: Version label for the validator responsible for the run.
- `summary`: Aggregated statistics (events, actions, bankroll snapshots, etc.).
- `memory`: Optional controller memory dumps (engine-agnostic).
- `source_files`: Pointers to CSV, meta, and report artifacts on disk.

⸻

## Example Payload (P1·C4)

```json
{
  "identity": {
    "name": "Quickstart – Place 6/8 with Pass",
    "run_id": "quickstart",
    "seed": 123,
    "timestamp": "2025-10-16T12:00:00Z"
  },
  "validation_engine": "v1",
  "summary": {
    "events_total": 120,
    "actions_total": 68,
    "bankroll_final": 1135.5
  },
  "memory": {},
  "source_files": {
    "csv": "journal.csv",
    "meta": "meta.json",
    "report": "report.json"
  }
}
```

- `validation_engine` is now mandatory and reflects `VALIDATION_ENGINE_VERSION`.
- `source_files.report` may be omitted when the report is returned in-memory.

⸻

## Versioning

- Schema version tracked implicitly via checkpoint documentation.
- Payload fields remain backward-compatible; new keys are additive.
- Consumers should ignore unknown keys while relying on documented sections.
