# === NOVA AGENT ENTRYPOINT ================================================
# This is the first file Agent Mode should read. It tells Agent where to look,
# what checkpoint we’re on, and the exact task to run. Keep it short & canonical.
# ==========================================================================

project: CrapsSim-Control
owner: Rey
maintainer: Nova
version_tag: v0.29.0-phase0-baseline

# Canonical pointers (Agent MUST read these next)
paths:
  snapshot: docs/CSC_SNAPSHOT.yaml
  checklist: docs/PHASE_CHECKLIST.md
  bible: docs/CSC_BIBLE.md
  workflow: docs/DEV_WORKFLOW.md

phase:
  phase: 1
  checkpoint: 4
  status: active
  next_checkpoint: 5
repo_path: .
docs_root: docs/
snapshot: docs/CSC_SNAPSHOT.yaml
bible: docs/CSC_BIBLE.md
checklist: docs/PHASE_CHECKLIST.md
workflow: docs/DEV_WORKFLOW.md
branch: phase1-c4-docs-refresh
previous_tag: v0.29.0-phase0c3-baseline
next_tag: v0.29.1-phase1-preflight

policy:
  agent_runs_per_checkpoint: 1
  allow_behavior_change: false     # Phase 1: surface-level toggles only
  require_tests_green: true
  require_update_snapshot: true
  require_bible_append: true

intent:
  summary: >
    Sync public-facing documentation and the quickstart example with the
    current runtime defaults (demo fallbacks off, strict validation on,
    analytics opt-in) while noting validation-engine labeling.
  success_criteria:
    - "docs/quick_start.md documents new defaults and CLI flag behavior"
    - "docs/spec.md describes run.demo_fallbacks, run.strict, and run.csv.embed_analytics"
    - "docs/report_schema.md example includes validation_engine: \"v1\""
    - "examples/quickstart_spec.json opts into demo fallbacks explicitly"
    - "docs/PHASE_CHECKLIST.md, docs/CSC_BIBLE.md, docs/CSC_SNAPSHOT.yaml updated for P1·C4"
    - "Commit created: 'P1C4: Docs sync and example refresh'"

agent_tasks:
  # High-level steps Agent should perform in order (mechanical only)
  - update_docs:
      - docs/quick_start.md
      - docs/spec.md
      - docs/report_schema.md
      - docs/PHASE_CHECKLIST.md
      - docs/CSC_BIBLE.md
      - docs/CSC_SNAPSHOT.yaml
  - update_example: "examples/quickstart_spec.json"
  - sync_entrypoint: "Ensure phase/checkpoint pointers reflect P1·C4"
  - verify_docs: "Spot-check Markdown renders without syntax issues"
  - commit: "P1C4: Docs sync and example refresh"

notes:
  - "Respect Phase 1 guardrails; avoid code changes beyond docs/examples."
  - "If any step fails, stop and report in chat; do not auto-invent fixes."
  - "After commit, ensure docs stay in sync with checkpoints."
