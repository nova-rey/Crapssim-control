# === NOVA AGENT ENTRYPOINT ================================================
# This is the first file Agent Mode should read. It tells Agent where to look,
# what checkpoint we’re on, and the exact task to run. Keep it short & canonical.
# ==========================================================================

project: CrapsSim-Control
owner: Rey
maintainer: Nova
version_tag: v0.29.0-phase0-baseline

# Canonical pointers (Agent MUST read these next)
paths:
  snapshot: docs/CSC_SNAPSHOT.yaml
  checklist: docs/PHASE_CHECKLIST.md
  bible: docs/CSC_BIBLE.md
  workflow: docs/DEV_WORKFLOW.md

phase:
  phase: 1
  checkpoint: 3
  status: active
  next_checkpoint: 4
repo_path: .
docs_root: docs/
snapshot: docs/CSC_SNAPSHOT.yaml
bible: docs/CSC_BIBLE.md
checklist: docs/PHASE_CHECKLIST.md
workflow: docs/DEV_WORKFLOW.md
branch: phase1-c3-validation-engine
previous_tag: v0.29.0-phase0c3-baseline
next_tag: v0.29.1-phase1-preflight

policy:
  agent_runs_per_checkpoint: 1
  allow_behavior_change: false     # Phase 1: surface-level toggles only
  require_tests_green: true
  require_update_snapshot: true
  require_bible_append: true

intent:
  summary: >
    Surface the validation engine label (v1) across CLI output and generated
    reports so spec provenance is traceable.
  success_criteria:
    - "VALIDATION_ENGINE_VERSION constant defined as 'v1'"
    - "CLI run output prints 'validation_engine: v1'"
    - "report.json payloads include validation_engine metadata"
    - "pytest -q tests/test_validation_engine_label.py"
    - "Commit created: 'P1C3: validation-engine labeling'"
    - "Snapshot + Bible updated for P1·C3"

agent_tasks:
  # High-level steps Agent should perform in order (mechanical only)
  - define_constant: "VALIDATION_ENGINE_VERSION = 'v1'"
  - wire_cli_output: "Print validation_engine label in run header"
  - update_report: "Attach validation_engine to generated report dicts"
  - add_test: "tests/test_validation_engine_label.py"
  - update_docs:
      - docs/PHASE_CHECKLIST.md
      - docs/CSC_BIBLE.md
      - docs/CSC_SNAPSHOT.yaml
  - run_tests: "pytest -q tests/test_validation_engine_label.py"
  - commit: "P1C3: validation-engine labeling"

notes:
  - "Respect Phase 1 guardrails; avoid broad behavior changes."
  - "If any step fails, stop and report in chat; do not auto-invent fixes."
  - "After commit, ensure docs stay in sync with checkpoints."
