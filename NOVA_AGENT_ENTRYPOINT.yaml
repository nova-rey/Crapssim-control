# === NOVA AGENT ENTRYPOINT ================================================
# This is the first file Agent Mode should read. It tells Agent where to look,
# what checkpoint we’re on, and the exact task to run. Keep it short & canonical.
# ==========================================================================

project: CrapsSim-Control
owner: Rey
maintainer: Nova
version_tag: v0.29.0-phase0-baseline

# Canonical pointers (Agent MUST read these next)
paths:
  snapshot: docs/CSC_SNAPSHOT.yaml
  checklist: docs/PHASE_CHECKLIST.md
  bible: docs/CSC_BIBLE.md
  workflow: docs/DEV_WORKFLOW.md

phase:
  phase: 1
  checkpoint: 5
  status: active
  next_checkpoint: null
repo_path: .
docs_root: docs/
snapshot: docs/CSC_SNAPSHOT.yaml
bible: docs/CSC_BIBLE.md
checklist: docs/PHASE_CHECKLIST.md
workflow: docs/DEV_WORKFLOW.md
branch: phase1-c5-terminology-provenance
previous_tag: v0.29.0-phase0c3-baseline
next_tag: v0.29.1-phase1-preflight

policy:
  agent_runs_per_checkpoint: 1
  allow_behavior_change: false     # Phase 1: surface-level toggles only
  require_tests_green: true
  require_update_snapshot: true
  require_bible_append: true

intent:
  summary: >
    Polish runtime terminology (Advisories vs Guardrails) and extend report
    metadata with validation engine provenance plus run flag source tracking.
  success_criteria:
    - "controller metadata nests validation_engine under metadata.run_flags"
    - "metadata.run_flags captures both values and default/spec/cli sources"
    - "CLI help text references Advisories by default and Guardrails for strict mode"
    - "docs/quick_start.md, docs/spec.md, docs/report_schema.md align with the new wording"
    - "tests/test_cli_flags.py asserts metadata structure and help text"
    - "docs/PHASE_CHECKLIST.md, docs/CSC_BIBLE.md, docs/CSC_SNAPSHOT.yaml updated for P1·C5"
    - "Commit created: 'P1C5: terminology polish and provenance metadata (no behavior change)'"

agent_tasks:
  # High-level steps Agent should perform in order (mechanical only)
  - update_controller: "Embed validation_engine and run flag sources under metadata"
  - update_cli: "Refresh help text and capture CLI override provenance"
  - update_tests: "Extend tests/test_cli_flags.py for metadata values/sources and --help output"
  - update_docs:
      - docs/quick_start.md
      - docs/spec.md
      - docs/report_schema.md
      - docs/PHASE_CHECKLIST.md
      - docs/CSC_BIBLE.md
      - docs/CSC_SNAPSHOT.yaml
  - sync_entrypoint: "Ensure phase/checkpoint pointers reflect P1·C5"
  - verify_docs: "Spot-check Markdown renders without syntax issues"
  - commit: "P1C5: terminology polish and provenance metadata (no behavior change)"

notes:
  - "Respect Phase 1 guardrails; avoid code changes beyond docs/examples."
  - "If any step fails, stop and report in chat; do not auto-invent fixes."
  - "After commit, ensure docs stay in sync with checkpoints."
